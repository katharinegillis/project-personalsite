version: '3.7'

# Required environment variables:
# - UID
# - GID

services:
  frontend:
    image: registry.ops.katiecordescodes.com/personalsite-frontend
    build:
      context: .
      dockerfile: .docker/frontend.dockerfile
      args:
        CONTAINER_UID: $CONTAINER_UID
        CONTAINER_GID: $CONTAINER_GID
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.personalsite-frontend.rule=Host(`${SITE_URL}`)"
      - "traefik.http.routers.personalsite-frontend.entryPoints=web"
      - "traefik.http.routers.personalsite-frontend.service=personalsite-frontend"
      - "traefik.http.services.personalsite-frontend.loadbalancer.server.port=8080"
    networks:
      - traefik
      - default

networks:
  traefik:
    external: true